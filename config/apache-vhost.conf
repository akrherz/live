<VirtualHost *:80>
  ServerName live.local
  DocumentRoot "/opt/live/public_html"
  Alias "/icons" "/opt/live/public_html/live/icons"

  ProxyPreserveHost On

  <Directory "/opt/live/public_html">
    AllowOverride All
    Options FollowSymLinks
    Order allow,deny
    Allow from all
  </Directory>

  # Openfire BOSH
  ProxyPass /http-bind http://openfire-bosh:7070/http-bind
  ProxyPassReverse /http-bind http://openfire-bosh:7070/http-bind

  # Openfire WebSocket (common endpoint)
  ProxyPass /ws ws://openfire-bosh:7070/ws
  ProxyPassReverse /ws ws://openfire-bosh:7070/ws

  # Optional alternate websocket endpoint used by some deployments
  ProxyPass /xmpp-websocket ws://openfire-bosh:7070/xmpp-websocket
  ProxyPassReverse /xmpp-websocket ws://openfire-bosh:7070/xmpp-websocket

</VirtualHost>
